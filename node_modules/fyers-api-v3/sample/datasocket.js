let DataSocket = require("../index.js").fyersDataSocket;

var skt= DataSocket.getInstance("QC7T0H8425-100:eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJhcGkuZnllcnMuaW4iLCJpYXQiOjE2OTcxNzA3NDQsImV4cCI6MTY5NzI0MzQwNCwibmJmIjoxNjk3MTcwNzQ0LCJhdWQiOlsieDowIiwieDoxIiwieDoyIiwiZDoxIiwiZDoyIiwieDoxIiwieDowIl0sInN1YiI6ImFjY2Vzc190b2tlbiIsImF0X2hhc2giOiJnQUFBQUFCbEtNVTRXckplTlZ6ODF5c2o0d1l2VFJBaWlxdjhzem9XUnYzMEctd3VwbHNLS1hUdl9qcFdaY1pjZWw0SGJCOWtBaVlrTFpyZzRpVmdDU2RXa0J2Sk01OTAtWjhySUlpdU5IUnBteVBwUGNoRzF5bz0iLCJkaXNwbGF5X25hbWUiOiJTVVRIQVIgTklIQUwiLCJvbXMiOiJLMSIsImhzbV9rZXkiOiJlNGM5NjAyNDhlODFjY2FjOTRkNzg2NTZmOTI5ZWMwODQxOTQwYjVhOWQ0N2IyMjQ2OWQyOWE5MSIsImZ5X2lkIjoiWFM2NTU3NCIsImFwcFR5cGUiOjEwMCwicG9hX2ZsYWciOiJOIn0.awBxV_4BaKAzpR8T83hexIgj3z1smXXKXYWI9hMWUso")

skt.on("connect",function(){skt.subscribe(['NSE:MIDCPNIFTY-INDEX'],false,1)
skt.mode(skt.FullMode,1)
console.log(skt.isConnected())
// skt.close()
// skt.mode(skt.LiteMode,[11,12,13])
// skt.channelresume(2)
// skt.unsubscribe(['NSE:IDEA-EQ'],false,1)
})

skt.on("message",function(message){
	console.log({"TEST":message})
})

skt.on("error",function(message){
	console.log("erroris",message)
})

skt.on("close",function(){
    console.log("socket closed")
})
skt.connect()
skt.autoreconnect()